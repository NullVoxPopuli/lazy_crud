  [1m[36m (9.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (6.2ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateUsers (20141231134904)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141231134904"]]
  [1m[35m (5.4ms)[0m  commit transaction
Migrating to CreateEvents (20150102225507)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150102225507"]]
  [1m[35m (5.1ms)[0m  commit transaction
Migrating to CreateDiscounts (20150104171110)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150104171110"]]
  [1m[35m (4.9ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (9.5ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (5.0ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.7ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (6.8ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (4.8ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (5.6ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[36m (8.9ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (4.3ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.3ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (5.6ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.4ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (4.8ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[36m (8.8ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (4.9ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (6.1ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (4.9ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.3ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (5.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:05:55.722714"], ["updated_at", "2015-05-10 13:05:55.722714"]]
  [1m[35m (6.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:05:55.742410"], ["updated_at", "2015-05-10 13:05:55.742410"]]
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:05:55.752923"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.752923"], ["user_id", 2]]
  [1m[35m (5.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:05:55.764372"], ["updated_at", "2015-05-10 13:05:55.764372"]]
  [1m[36m (7.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:05:55.772803"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.772803"], ["user_id", 3]]
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:05:55.782106"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:05:55.782106"]]
  [1m[36m (6.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:05:55.793088"], ["updated_at", "2015-05-10 13:05:55.793088"]]
  [1m[35m (7.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:05:55.802271"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.802271"], ["user_id", 4]]
  [1m[36m (5.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:05:55.811147"], ["updated_at", "2015-05-10 13:05:55.811147"]]
  [1m[35m (4.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:05:55.818176"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.818176"], ["user_id", 5]]
  [1m[36m (5.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:05:55.826377"], ["updated_at", "2015-05-10 13:05:55.826377"]]
  [1m[35m (4.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:05:55.833393"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.833393"], ["user_id", 6]]
  [1m[36m (5.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:05:55.841937"], ["updated_at", "2015-05-10 13:05:55.841937"]]
  [1m[35m (5.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:05:55.848981"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.848981"], ["user_id", 7]]
  [1m[36m (7.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:05:55.859327"], ["updated_at", "2015-05-10 13:05:55.859327"]]
  [1m[35m (4.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:05:55.866551"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.866551"], ["user_id", 8]]
  [1m[36m (7.0ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"7"}
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 7]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:05:55.890232"], ["updated_at", "2015-05-10 13:05:55.890232"]]
  [1m[36m (6.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:05:55.898887"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.898887"], ["user_id", 9]]
  [1m[35m (5.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:05:55.907624"], ["updated_at", "2015-05-10 13:05:55.907624"]]
  [1m[36m (5.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:05:55.915090"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.915090"], ["user_id", 10]]
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:05:55.923127"], ["updated_at", "2015-05-10 13:05:55.923127"]]
  [1m[36m (5.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:05:55.930980"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:05:55.930980"], ["user_id", 11]]
  [1m[35m (4.8ms)[0m  commit transaction
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"10"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 10]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (8.9ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (5.5ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (4.8ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (5.4ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (4.7ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (5.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:06:15.538112"], ["updated_at", "2015-05-10 13:06:15.538112"]]
  [1m[35m (5.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:06:15.555040"], ["updated_at", "2015-05-10 13:06:15.555040"]]
  [1m[36m (5.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:06:15.574119"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.574119"], ["user_id", 2]]
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:06:15.591047"], ["updated_at", "2015-05-10 13:06:15.591047"]]
  [1m[36m (4.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:06:15.597802"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.597802"], ["user_id", 3]]
  [1m[35m (5.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:06:15.605692"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:06:15.605692"]]
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:06:15.616228"], ["updated_at", "2015-05-10 13:06:15.616228"]]
  [1m[35m (4.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:06:15.626376"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.626376"], ["user_id", 4]]
  [1m[36m (5.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:06:15.634738"], ["updated_at", "2015-05-10 13:06:15.634738"]]
  [1m[35m (5.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:06:15.641673"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.641673"], ["user_id", 5]]
  [1m[36m (5.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:06:15.652709"], ["updated_at", "2015-05-10 13:06:15.652709"]]
  [1m[35m (4.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:06:15.662137"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.662137"], ["user_id", 6]]
  [1m[36m (4.9ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"5"}
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 5]]
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:06:15.691067"], ["updated_at", "2015-05-10 13:06:15.691067"]]
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:06:15.703486"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.703486"], ["user_id", 7]]
  [1m[35m (4.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:06:15.711269"], ["updated_at", "2015-05-10 13:06:15.711269"]]
  [1m[36m (5.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:06:15.718884"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.718884"], ["user_id", 8]]
  [1m[35m (6.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:06:15.731826"], ["updated_at", "2015-05-10 13:06:15.731826"]]
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:06:15.739362"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.739362"], ["user_id", 9]]
  [1m[35m (4.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:06:15.747635"], ["updated_at", "2015-05-10 13:06:15.747635"]]
  [1m[36m (7.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:06:15.759765"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.759765"], ["user_id", 10]]
  [1m[35m (4.6ms)[0m  commit transaction
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"9"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 9]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:06:15.777727"], ["updated_at", "2015-05-10 13:06:15.777727"]]
  [1m[35m (5.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:06:15.785293"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:06:15.785293"], ["user_id", 11]]
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
  [1m[36m (14.1ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (5.0ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (7.2ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (6.8ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.0ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (5.0ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:37.950924"], ["updated_at", "2015-05-10 13:08:37.950924"]]
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:08:37.974922"], ["updated_at", "2015-05-10 13:08:37.974922"]]
  [1m[36m (5.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:08:37.990925"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:37.990925"], ["user_id", 2]]
  [1m[35m (9.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:08:38.011337"], ["updated_at", "2015-05-10 13:08:38.011337"]]
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:08:38.017958"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.017958"], ["user_id", 3]]
  [1m[35m (9.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.036302"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:08:38.036302"]]
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.051763"], ["updated_at", "2015-05-10 13:08:38.051763"]]
  [1m[35m (8.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.066958"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.066958"], ["user_id", 4]]
  [1m[36m (7.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "discounts"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:08:38.089175"], ["updated_at", "2015-05-10 13:08:38.089175"]]
  [1m[36m (6.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:08:38.103734"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.103734"], ["user_id", 5]]
  [1m[35m (17.6ms)[0m  commit transaction
Processing by DiscountsController#create as HTML
  Parameters: {"custom_field"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>nil, "event_id"=>"4", "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"3"}
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 3]]
Completed 500 Internal Server Error in 38ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.183826"], ["updated_at", "2015-05-10 13:08:38.183826"]]
  [1m[35m (6.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.192982"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.192982"], ["user_id", 6]]
  [1m[36m (5.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.224811"], ["updated_at", "2015-05-10 13:08:38.224811"]]
  [1m[35m (10.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.244473"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.244473"], ["user_id", 7]]
  [1m[36m (14.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:08:38.265499"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:08:38.265499"]]
  [1m[35m (11.4ms)[0m  commit transaction
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"6", "id"=>"2"}
  [1m[36mEvent Load (0.8ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 6], ["id", 2]]
Completed 500 Internal Server Error in 24ms (ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:08:38.321313"], ["updated_at", "2015-05-10 13:08:38.321313"]]
  [1m[36m (6.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:08:38.335697"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.335697"], ["user_id", 8]]
  [1m[35m (8.6ms)[0m  commit transaction
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"7"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 7]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.359141"], ["updated_at", "2015-05-10 13:08:38.359141"]]
  [1m[35m (5.6ms)[0m  commit transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.370815"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.370815"], ["user_id", 9]]
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.380199"], ["updated_at", "2015-05-10 13:08:38.380199"]]
  [1m[35m (5.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.388317"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.388317"], ["user_id", 10]]
  [1m[36m (8.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.418624"], ["updated_at", "2015-05-10 13:08:38.418624"]]
  [1m[35m (6.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.427658"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.427658"], ["user_id", 11]]
  [1m[36m (5.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.441318"], ["updated_at", "2015-05-10 13:08:38.441318"]]
  [1m[35m (10.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.468198"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.468198"], ["user_id", 12]]
  [1m[36m (5.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.482376"], ["updated_at", "2015-05-10 13:08:38.482376"]]
  [1m[35m (6.1ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.491564"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.491564"], ["user_id", 13]]
  [1m[36m (8.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:08:38.509144"], ["updated_at", "2015-05-10 13:08:38.509144"]]
  [1m[35m (7.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:08:38.525258"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:08:38.525258"], ["user_id", 14]]
  [1m[36m (10.5ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"13"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 13]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
  [1m[36m (16.4ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (6.0ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (5.7ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (7.1ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (4.7ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:10:11.842196"], ["updated_at", "2015-05-10 13:10:11.842196"]]
  [1m[35m (5.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:10:11.860235"], ["updated_at", "2015-05-10 13:10:11.860235"]]
  [1m[36m (6.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:11.874938"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:11.874938"], ["user_id", 2]]
  [1m[35m (4.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:10:11.890078"], ["updated_at", "2015-05-10 13:10:11.890078"]]
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:11.898057"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:11.898057"], ["user_id", 3]]
  [1m[35m (4.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:10:11.905459"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:10:11.905459"]]
  [1m[36m (7.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:10:11.917974"], ["updated_at", "2015-05-10 13:10:11.917974"]]
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:10:11.926568"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:11.926568"], ["user_id", 4]]
  [1m[36m (8.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:11.937140"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:10:11.937140"]]
  [1m[35m (5.4ms)[0m  commit transaction
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"label"=>"updated"}, "event_id"=>"3", "id"=>"2"}
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 3], ["id", 2]]
Unpermitted parameters: label
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
Redirected to http://test.host/events/3/discounts
Completed 302 Found in 20ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:10:11.969397"], ["updated_at", "2015-05-10 13:10:11.969397"]]
  [1m[36m (8.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:11.980313"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:11.980313"], ["user_id", 5]]
  [1m[35m (9.0ms)[0m  commit transaction
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"4"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 4]]
Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 0.1ms)
  [1m[35mDiscount Load (0.2ms)[0m  SELECT "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ?  [["event_id", 4]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:10:12.011157"], ["updated_at", "2015-05-10 13:10:12.011157"]]
  [1m[36m (10.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:12.026687"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:12.026687"], ["user_id", 6]]
  [1m[35m (5.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:10:12.041860"], ["event_id", 5], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:10:12.041860"]]
  [1m[36m (6.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."event_id" = ?  [["event_id", 5]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"5", "id"=>"3"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 5]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 5], ["id", 3]]
  [1m[36m (2.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "discounts" WHERE "discounts"."id" = ?  [["id", 3]]
  [1m[36m (6.7ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/5/discounts
Completed 302 Found in 21ms (ActiveRecord: 9.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."event_id" = ?  [["event_id", 5]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:10:12.089646"], ["updated_at", "2015-05-10 13:10:12.089646"]]
  [1m[36m (5.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:12.098715"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:12.098715"], ["user_id", 7]]
  [1m[35m (8.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:10:12.110852"], ["updated_at", "2015-05-10 13:10:12.110852"]]
  [1m[35m (4.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:10:12.118031"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:12.118031"], ["user_id", 8]]
  [1m[36m (6.0ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#create as HTML
  Parameters: {"custom_field"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>nil, "event_id"=>"7", "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"6"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 6]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:10:12.135332"], ["updated_at", "2015-05-10 13:10:12.135332"]]
  [1m[36m (12.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:12.153707"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:12.153707"], ["user_id", 9]]
  [1m[35m (6.4ms)[0m  commit transaction
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"8"}
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 8]]
Completed 200 OK in 6ms (Views: 3.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:10:12.171494"], ["updated_at", "2015-05-10 13:10:12.171494"]]
  [1m[35m (5.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:10:12.179512"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:12.179512"], ["user_id", 10]]
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:12.187260"], ["event_id", 9], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:10:12.187260"]]
  [1m[35m (4.9ms)[0m  commit transaction
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"9", "id"=>"4"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 9]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 9], ["id", 4]]
Completed 200 OK in 5ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:10:12.202902"], ["updated_at", "2015-05-10 13:10:12.202902"]]
  [1m[36m (10.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:10:12.221395"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:12.221395"], ["user_id", 11]]
  [1m[35m (4.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:10:12.231222"], ["event_id", 10], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:10:12.231222"]]
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"10", "id"=>"5"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 10]]
  [1m[36mDiscount Load (0.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 10], ["id", 5]]
Completed 200 OK in 7ms (Views: 3.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:10:12.250726"], ["updated_at", "2015-05-10 13:10:12.250726"]]
  [1m[35m (9.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:10:12.267463"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:12.267463"], ["user_id", 12]]
  [1m[36m (8.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:10:12.284901"], ["updated_at", "2015-05-10 13:10:12.284901"]]
  [1m[35m (5.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:10:12.292160"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:10:12.292160"], ["user_id", 13]]
  [1m[36m (5.4ms)[0m  [1mcommit transaction[0m
  [1m[36m (8.1ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (7.3ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (7.7ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (11.4ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (15.9ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (13.6ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:13:00.043611"], ["updated_at", "2015-05-10 13:13:00.043611"]]
  [1m[35m (32.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:13:00.100702"], ["updated_at", "2015-05-10 13:13:00.100702"]]
  [1m[36m (5.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:13:00.131446"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.131446"], ["user_id", 2]]
  [1m[35m (8.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:13:00.175953"], ["updated_at", "2015-05-10 13:13:00.175953"]]
  [1m[36m (8.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:13:00.187319"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.187319"], ["user_id", 3]]
  [1m[35m (23.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:13:00.218008"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:13:00.218008"]]
  [1m[36m (6.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:13:00.236243"], ["updated_at", "2015-05-10 13:13:00.236243"]]
  [1m[35m (5.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:13:00.247845"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.247845"], ["user_id", 4]]
  [1m[36m (8.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:13:00.264084"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:13:00.264084"]]
  [1m[35m (10.5ms)[0m  commit transaction
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"label"=>"updated"}, "event_id"=>"3", "id"=>"2"}
  [1m[36mEvent Load (0.5ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mDiscount Load (0.3ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 3], ["id", 2]]
Unpermitted parameters: label
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to http://test.host/events/3/discounts
Completed 302 Found in 42ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (7.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:13:00.340323"], ["updated_at", "2015-05-10 13:13:00.340323"]]
  [1m[36m (7.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:13:00.359156"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.359156"], ["user_id", 5]]
  [1m[35m (5.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:13:00.367464"], ["event_id", 4], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:13:00.367464"]]
  [1m[36m (21.5ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"4", "id"=>"3"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mDiscount Load (0.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 4], ["id", 3]]
Completed 200 OK in 24ms (Views: 20.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:13:00.435953"], ["updated_at", "2015-05-10 13:13:00.435953"]]
  [1m[35m (22.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (7.7ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:13:00.462729"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.462729"], ["user_id", 6]]
  [1m[36m (10.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:13:00.492821"], ["event_id", 5], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:13:00.492821"]]
  [1m[35m (8.3ms)[0m  commit transaction
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."event_id" = ?[0m  [["event_id", 5]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"5", "id"=>"4"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 5]]
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 5], ["id", 4]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "discounts" WHERE "discounts"."id" = ?[0m  [["id", 4]]
  [1m[35m (21.0ms)[0m  commit transaction
Redirected to http://test.host/events/5/discounts
Completed 302 Found in 30ms (ActiveRecord: 21.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."event_id" = ?[0m  [["event_id", 5]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:13:00.577154"], ["updated_at", "2015-05-10 13:13:00.577154"]]
  [1m[35m (4.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:13:00.588314"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.588314"], ["user_id", 7]]
  [1m[36m (13.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:13:00.625733"], ["updated_at", "2015-05-10 13:13:00.625733"]]
  [1m[36m (4.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:13:00.633967"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.633967"], ["user_id", 8]]
  [1m[35m (6.4ms)[0m  commit transaction
Processing by DiscountsController#create as HTML
  Parameters: {"custom_field"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>nil, "event_id"=>"7", "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"6"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 6]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:13:00.658487"], ["updated_at", "2015-05-10 13:13:00.658487"]]
  [1m[35m (6.8ms)[0m  commit transaction
  [1m[36m (2.9ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:13:00.673810"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.673810"], ["user_id", 9]]
  [1m[36m (18.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:13:00.706397"], ["updated_at", "2015-05-10 13:13:00.706397"]]
  [1m[35m (16.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:13:00.726845"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.726845"], ["user_id", 10]]
  [1m[36m (12.0ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"9"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 9]]
Completed 200 OK in 22ms (Views: 9.1ms | ActiveRecord: 0.2ms)
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ?[0m  [["event_id", 9]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:13:00.777476"], ["updated_at", "2015-05-10 13:13:00.777476"]]
  [1m[35m (12.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:13:00.798512"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.798512"], ["user_id", 11]]
  [1m[36m (7.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (12.4ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:13:00.819143"], ["event_id", 10], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:13:00.819143"]]
  [1m[35m (12.8ms)[0m  commit transaction
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"10", "id"=>"5"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 10]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 10], ["id", 5]]
Completed 200 OK in 14ms (Views: 7.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:13:00.884832"], ["updated_at", "2015-05-10 13:13:00.884832"]]
  [1m[36m (20.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:13:00.911210"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:13:00.911210"], ["user_id", 12]]
  [1m[35m (7.9ms)[0m  commit transaction
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"11"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 11]]
Completed 200 OK in 8ms (Views: 3.4ms | ActiveRecord: 0.1ms)
  [1m[36m (19.2ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (5.2ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.3ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (5.6ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (6.2ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (5.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:21:54.283941"], ["updated_at", "2015-05-10 13:21:54.283941"]]
  [1m[35m (10.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:21:54.330764"], ["updated_at", "2015-05-10 13:21:54.330764"]]
  [1m[36m (14.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:54.377499"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.377499"], ["user_id", 2]]
  [1m[35m (20.0ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:21:54.424114"], ["updated_at", "2015-05-10 13:21:54.424114"]]
  [1m[36m (10.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:54.446629"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.446629"], ["user_id", 3]]
  [1m[35m (10.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:21:54.460318"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:21:54.460318"]]
  [1m[36m (21.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:21:54.495405"], ["updated_at", "2015-05-10 13:21:54.495405"]]
  [1m[35m (13.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:21:54.519170"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.519170"], ["user_id", 4]]
  [1m[36m (12.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:54.534797"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:21:54.534797"]]
  [1m[35m (5.4ms)[0m  commit transaction
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"3", "id"=>"2"}
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mDiscount Load (0.3ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 3], ["id", 2]]
  Rendered discounts/edit.html.erb within layouts/application (0.9ms)
Completed 200 OK in 48ms (Views: 11.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:21:54.603325"], ["updated_at", "2015-05-10 13:21:54.603325"]]
  [1m[36m (10.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:54.615859"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.615859"], ["user_id", 5]]
  [1m[35m (4.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:21:54.633730"], ["updated_at", "2015-05-10 13:21:54.633730"]]
  [1m[35m (5.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:21:54.642614"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.642614"], ["user_id", 6]]
  [1m[36m (18.8ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#create as HTML
  Parameters: {"custom_field"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>nil, "event_id"=>"5", "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"4"}
  [1m[35mEvent Load (0.6ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 4]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:21:54.686202"], ["updated_at", "2015-05-10 13:21:54.686202"]]
  [1m[36m (6.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:54.697139"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.697139"], ["user_id", 7]]
  [1m[35m (6.1ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:21:54.708618"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:21:54.708618"]]
  [1m[36m (16.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."event_id" = ?  [["event_id", 6]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"6", "id"=>"3"}
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 6], ["id", 3]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (8.1ms)[0m  DELETE FROM "discounts" WHERE "discounts"."id" = ?  [["id", 3]]
  [1m[36m (13.8ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/6/discounts
Completed 302 Found in 32ms (ActiveRecord: 22.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."event_id" = ?  [["event_id", 6]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:21:54.786421"], ["updated_at", "2015-05-10 13:21:54.786421"]]
  [1m[36m (7.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:54.805642"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.805642"], ["user_id", 8]]
  [1m[35m (6.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:21:54.822050"], ["updated_at", "2015-05-10 13:21:54.822050"]]
  [1m[36m (6.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:54.833467"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.833467"], ["user_id", 9]]
  [1m[35m (12.1ms)[0m  commit transaction
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"8"}
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 8]]
Completed 200 OK in 15ms (Views: 7.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:21:54.875671"], ["updated_at", "2015-05-10 13:21:54.875671"]]
  [1m[35m (7.2ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:21:54.900431"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.900431"], ["user_id", 10]]
  [1m[36m (10.3ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"9"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 9]]
Completed 200 OK in 10ms (Views: 8.2ms | ActiveRecord: 0.1ms)
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ?[0m  [["event_id", 9]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:21:54.928881"], ["updated_at", "2015-05-10 13:21:54.928881"]]
  [1m[35m (8.5ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:21:54.946929"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:54.946929"], ["user_id", 11]]
  [1m[36m (8.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:54.959548"], ["event_id", 10], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:21:54.959548"]]
  [1m[35m (7.8ms)[0m  commit transaction
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"10", "id"=>"4"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 10]]
  [1m[35mDiscount Load (0.5ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 10], ["id", 4]]
Completed 200 OK in 15ms (Views: 5.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:21:54.996563"], ["updated_at", "2015-05-10 13:21:54.996563"]]
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:21:55.004917"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:21:55.004917"], ["user_id", 12]]
  [1m[35m (13.9ms)[0m  commit transaction
  [1m[36m (1.5ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:21:55.022721"], ["event_id", 11], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:21:55.022721"]]
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"label"=>"updated"}, "event_id"=>"11", "id"=>"5"}
  [1m[35mEvent Load (6.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 11]]
  [1m[36mDiscount Load (0.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 11], ["id", 5]]
Unpermitted parameters: label
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/11/discounts
Completed 302 Found in 13ms (ActiveRecord: 6.5ms)
  [1m[36m (14.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (7.2ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateUsers (20141231134904)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20141231134904"]]
  [1m[35m (5.8ms)[0m  commit transaction
Migrating to CreateEvents (20150102225507)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150102225507"]]
  [1m[35m (5.3ms)[0m  commit transaction
Migrating to CreateDiscounts (20150104171110)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150104171110"]]
  [1m[35m (13.5ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (8.2ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (12.7ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (10.6ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (7.1ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (26.9ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (23.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:24:39.351350"], ["updated_at", "2015-05-10 13:24:39.351350"]]
  [1m[35m (26.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:24:39.440103"], ["updated_at", "2015-05-10 13:24:39.440103"]]
  [1m[36m (8.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (3.8ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.459688"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.459688"], ["user_id", 2]]
  [1m[35m (7.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:24:39.495685"], ["updated_at", "2015-05-10 13:24:39.495685"]]
  [1m[36m (24.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.527407"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.527407"], ["user_id", 3]]
  [1m[35m (12.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:24:39.542490"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:24:39.542490"]]
  [1m[36m (9.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:24:39.567557"], ["updated_at", "2015-05-10 13:24:39.567557"]]
  [1m[35m (8.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:24:39.590733"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.590733"], ["user_id", 4]]
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.601487"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:24:39.601487"]]
  [1m[35m (8.6ms)[0m  commit transaction
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"label"=>"updated"}, "event_id"=>"3", "id"=>"2"}
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 3], ["id", 2]]
Unpermitted parameters: label
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
Redirected to http://test.host/events/3/discounts
Completed 302 Found in 14ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:24:39.632104"], ["updated_at", "2015-05-10 13:24:39.632104"]]
  [1m[36m (9.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.646002"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.646002"], ["user_id", 5]]
  [1m[35m (5.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:24:39.659609"], ["event_id", 4], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:24:39.659609"]]
  [1m[36m (4.8ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"4", "id"=>"3"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mDiscount Load (0.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 4], ["id", 3]]
Completed 200 OK in 21ms (Views: 8.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:24:39.693388"], ["updated_at", "2015-05-10 13:24:39.693388"]]
  [1m[35m (5.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:24:39.705470"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.705470"], ["user_id", 6]]
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discounts" ("created_at", "deleted_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.715148"], ["deleted_at", "2015-05-10 13:24:39.712814"], ["event_id", 5], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:24:39.715148"]]
  [1m[35m (7.2ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 5]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:24:39.737711"], ["updated_at", "2015-05-10 13:24:39.737711"]]
  [1m[35m (4.8ms)[0m  commit transaction
  [1m[36m (2.8ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:24:39.749502"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.749502"], ["user_id", 7]]
  [1m[36m (9.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.765194"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:24:39.765194"]]
  [1m[35m (6.9ms)[0m  commit transaction
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"6", "id"=>"5"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 6], ["id", 5]]
Completed 200 OK in 8ms (Views: 3.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:24:39.786595"], ["updated_at", "2015-05-10 13:24:39.786595"]]
  [1m[36m (5.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.796065"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.796065"], ["user_id", 8]]
  [1m[35m (9.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:24:39.811709"], ["event_id", 7], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:24:39.811709"]]
  [1m[36m (5.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 7]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"7", "id"=>"6"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 7]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 7], ["id", 6]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "discounts" SET "updated_at" = '2015-05-10 13:24:39.826830', "deleted_at" = '2015-05-10 13:24:39.826830' WHERE "discounts"."id" = 6
  [1m[36m (8.0ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/7/discounts
Completed 302 Found in 15ms (ActiveRecord: 8.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 7]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:24:39.840429"], ["updated_at", "2015-05-10 13:24:39.840429"]]
  [1m[36m (6.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.849153"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.849153"], ["user_id", 9]]
  [1m[35m (4.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:24:39.862132"], ["updated_at", "2015-05-10 13:24:39.862132"]]
  [1m[35m (6.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:24:39.870591"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.870591"], ["user_id", 10]]
  [1m[36m (7.3ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#create as HTML
  Parameters: {"custom_field"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>nil, "event_id"=>"9", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"8"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 8]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:24:39.892383"], ["updated_at", "2015-05-10 13:24:39.892383"]]
  [1m[36m (7.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:24:39.906698"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.906698"], ["user_id", 11]]
  [1m[35m (6.6ms)[0m  commit transaction
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"10"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 10]]
Completed 200 OK in 8ms (Views: 2.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:24:39.930062"], ["updated_at", "2015-05-10 13:24:39.930062"]]
  [1m[35m (9.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:24:39.942948"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:24:39.942948"], ["user_id", 12]]
  [1m[36m (9.2ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"11"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 11]]
Completed 200 OK in 9ms (Views: 3.9ms | ActiveRecord: 0.2ms)
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 11]]
  [1m[36m (13.3ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (10.9ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (20.6ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (8.8ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (4.2ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (9.0ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:03.854365"], ["updated_at", "2015-05-10 13:31:03.854365"]]
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:03.887893"], ["updated_at", "2015-05-10 13:31:03.887893"]]
  [1m[36m (7.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:03.903484"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:03.903484"], ["user_id", 2]]
  [1m[35m (32.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:03.971476"], ["updated_at", "2015-05-10 13:31:03.971476"]]
  [1m[36m (18.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:03.991883"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:03.991883"], ["user_id", 3]]
  [1m[35m (8.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:04.006293"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:04.006293"]]
  [1m[36m (9.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:04.037566"], ["updated_at", "2015-05-10 13:31:04.037566"]]
  [1m[35m (10.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:04.050609"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.050609"], ["user_id", 4]]
  [1m[36m (15.5ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"3"}
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 3]]
  Rendered discounts/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 54ms (Views: 14.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (13.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:04.146365"], ["updated_at", "2015-05-10 13:31:04.146365"]]
  [1m[36m (9.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:04.190287"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.190287"], ["user_id", 5]]
  [1m[35m (18.6ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:04.230127"], ["updated_at", "2015-05-10 13:31:04.230127"]]
  [1m[35m (6.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:04.239154"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.239154"], ["user_id", 6]]
  [1m[36m (11.0ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#create as HTML
  Parameters: {"custom_field"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>nil, "event_id"=>"5", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"4"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 4]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:04.275618"], ["updated_at", "2015-05-10 13:31:04.275618"]]
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:04.284573"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.284573"], ["user_id", 7]]
  [1m[35m (7.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:04.297516"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:04.297516"]]
  [1m[36m (5.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 6]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"6", "id"=>"2"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mDiscount Load (0.7ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 6], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "discounts" SET "updated_at" = '2015-05-10 13:31:04.336290', "deleted_at" = '2015-05-10 13:31:04.336290' WHERE "discounts"."id" = 2
  [1m[36m (5.5ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/6/discounts
Completed 302 Found in 26ms (ActiveRecord: 6.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 6]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:04.357273"], ["updated_at", "2015-05-10 13:31:04.357273"]]
  [1m[36m (7.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:04.367149"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.367149"], ["user_id", 8]]
  [1m[35m (9.9ms)[0m  commit transaction
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"7"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 7]]
Completed 200 OK in 16ms (Views: 8.8ms | ActiveRecord: 0.1ms)
  [1m[35mDiscount Load (0.3ms)[0m  SELECT "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 7]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (7.0ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:04.443293"], ["updated_at", "2015-05-10 13:31:04.443293"]]
  [1m[36m (9.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:04.467601"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.467601"], ["user_id", 9]]
  [1m[35m (17.0ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:04.487928"], ["event_id", 8], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:04.487928"]]
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"8", "id"=>"3"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 8]]
  [1m[36mDiscount Load (0.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 8], ["id", 3]]
Completed 200 OK in 6ms (Views: 2.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:04.519012"], ["updated_at", "2015-05-10 13:31:04.519012"]]
  [1m[35m (6.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:04.531004"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.531004"], ["user_id", 10]]
  [1m[36m (9.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discounts" ("created_at", "deleted_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:04.546345"], ["deleted_at", "2015-05-10 13:31:04.543208"], ["event_id", 9], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:04.546345"]]
  [1m[35m (18.4ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 9]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:04.587928"], ["updated_at", "2015-05-10 13:31:04.587928"]]
  [1m[35m (15.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:04.615435"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.615435"], ["user_id", 11]]
  [1m[36m (6.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:04.629330"], ["event_id", 10], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:04.629330"]]
  [1m[35m (5.1ms)[0m  commit transaction
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"10", "id"=>"5"}
  [1m[36mEvent Load (0.6ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 10]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 10], ["id", 5]]
Completed 200 OK in 33ms (Views: 4.8ms | ActiveRecord: 0.8ms)
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:04.677684"], ["updated_at", "2015-05-10 13:31:04.677684"]]
  [1m[36m (5.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:04.687222"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:04.687222"], ["user_id", 12]]
  [1m[35m (10.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:04.706610"], ["event_id", 11], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:04.706610"]]
  [1m[36m (8.1ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"label"=>"updated"}, "event_id"=>"11", "id"=>"6"}
  [1m[35mEvent Load (0.5ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 11]]
  [1m[36mDiscount Load (0.6ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 11], ["id", 6]]
Unpermitted parameters: label
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/11/discounts
Completed 302 Found in 23ms (ActiveRecord: 1.4ms)
  [1m[36m (13.1ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (7.3ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (10.1ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (5.6ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (6.3ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (5.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:14.801622"], ["updated_at", "2015-05-10 13:31:14.801622"]]
  [1m[35m (4.3ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:14.824449"], ["updated_at", "2015-05-10 13:31:14.824449"]]
  [1m[36m (11.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:14.846014"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:14.846014"], ["user_id", 2]]
  [1m[35m (6.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:14.863474"], ["updated_at", "2015-05-10 13:31:14.863474"]]
  [1m[36m (9.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:14.874493"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:14.874493"], ["user_id", 3]]
  [1m[35m (5.4ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:14.883847"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:14.883847"]]
  [1m[36m (10.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:14.909241"], ["updated_at", "2015-05-10 13:31:14.909241"]]
  [1m[35m (11.0ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:14.923388"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:14.923388"], ["user_id", 4]]
  [1m[36m (9.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:14.948167"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:14.948167"]]
  [1m[35m (7.1ms)[0m  commit transaction
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"name"=>"updated"}, "event_id"=>"3", "id"=>"2"}
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mDiscount Load (0.3ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 3], ["id", 2]]
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (9.1ms)[0m  UPDATE "discounts" SET "name" = ?, "updated_at" = ? WHERE "discounts"."id" = 2  [["name", "updated"], ["updated_at", "2015-05-10 13:31:15.036943"]]
  [1m[36m (7.5ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/3/discounts
Completed 302 Found in 80ms (ActiveRecord: 17.5ms)
  [1m[35m (0.8ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:15.063989"], ["updated_at", "2015-05-10 13:31:15.063989"]]
  [1m[35m (11.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:15.096997"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:15.096997"], ["user_id", 5]]
  [1m[36m (9.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (2.5ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:15.126575"], ["updated_at", "2015-05-10 13:31:15.126575"]]
  [1m[36m (5.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:15.144769"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:15.144769"], ["user_id", 6]]
  [1m[35m (9.0ms)[0m  commit transaction
Processing by DiscountsController#create as HTML
  Parameters: {"custom_field"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>nil, "event_id"=>"5", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"4"}
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 4]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:15.177881"], ["updated_at", "2015-05-10 13:31:15.177881"]]
  [1m[35m (6.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:15.186856"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:15.186856"], ["user_id", 7]]
  [1m[36m (4.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:15.194255"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:15.194255"]]
  [1m[35m (10.3ms)[0m  commit transaction
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"6", "id"=>"3"}
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 6], ["id", 3]]
Completed 200 OK in 14ms (Views: 9.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:15.226112"], ["updated_at", "2015-05-10 13:31:15.226112"]]
  [1m[36m (5.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:15.236132"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:15.236132"], ["user_id", 8]]
  [1m[35m (12.9ms)[0m  commit transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:15.256132"], ["event_id", 7], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:15.256132"]]
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 7]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"7", "id"=>"4"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 7]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 7], ["id", 4]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "discounts" SET "updated_at" = '2015-05-10 13:31:15.282074', "deleted_at" = '2015-05-10 13:31:15.282074' WHERE "discounts"."id" = 4
  [1m[36m (7.5ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/7/discounts
Completed 302 Found in 23ms (ActiveRecord: 8.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 7]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:15.311150"], ["updated_at", "2015-05-10 13:31:15.311150"]]
  [1m[36m (11.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:15.326797"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:15.326797"], ["user_id", 9]]
  [1m[35m (11.2ms)[0m  commit transaction
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"8"}
  [1m[36mEvent Load (0.6ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 8]]
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 0.6ms)
  [1m[35mDiscount Load (0.2ms)[0m  SELECT "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 8]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:15.355032"], ["updated_at", "2015-05-10 13:31:15.355032"]]
  [1m[36m (9.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:15.372985"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:15.372985"], ["user_id", 10]]
  [1m[35m (8.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:15.393560"], ["event_id", 9], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:15.393560"]]
  [1m[36m (7.1ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"9", "id"=>"5"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 9]]
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 9], ["id", 5]]
Completed 200 OK in 9ms (Views: 2.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:15.418096"], ["updated_at", "2015-05-10 13:31:15.418096"]]
  [1m[35m (14.8ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:15.441735"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:15.441735"], ["user_id", 11]]
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"10"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 10]]
Completed 200 OK in 9ms (Views: 2.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:15.464517"], ["updated_at", "2015-05-10 13:31:15.464517"]]
  [1m[36m (6.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:15.476472"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:15.476472"], ["user_id", 12]]
  [1m[35m (5.1ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "discounts" ("created_at", "deleted_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:15.488684"], ["deleted_at", "2015-05-10 13:31:15.482959"], ["event_id", 11], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:15.488684"]]
  [1m[36m (11.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 11]]
  [1m[36m (9.6ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (9.4ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.3ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (11.5ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.7ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (6.8ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:33.039769"], ["updated_at", "2015-05-10 13:31:33.039769"]]
  [1m[35m (4.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:33.056515"], ["updated_at", "2015-05-10 13:31:33.056515"]]
  [1m[36m (5.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.073867"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.073867"], ["user_id", 2]]
  [1m[35m (7.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:33.099056"], ["updated_at", "2015-05-10 13:31:33.099056"]]
  [1m[36m (4.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.106926"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.106926"], ["user_id", 3]]
  [1m[35m (8.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.120014"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:33.120014"]]
  [1m[36m (8.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:33.150227"], ["updated_at", "2015-05-10 13:31:33.150227"]]
  [1m[35m (17.9ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.174028"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.174028"], ["user_id", 4]]
  [1m[36m (8.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.190396"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:33.190396"]]
  [1m[35m (6.1ms)[0m  commit transaction
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"name"=>"updated"}, "event_id"=>"3", "id"=>"2"}
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mDiscount Load (0.3ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 3], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "discounts" SET "name" = ?, "updated_at" = ? WHERE "discounts"."id" = 2  [["name", "updated"], ["updated_at", "2015-05-10 13:31:33.255860"]]
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/3/discounts
Completed 302 Found in 52ms (ActiveRecord: 5.6ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:33.273241"], ["updated_at", "2015-05-10 13:31:33.273241"]]
  [1m[35m (12.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.298946"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.298946"], ["user_id", 5]]
  [1m[36m (13.9ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"4"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 4]]
Completed 200 OK in 39ms (Views: 20.6ms | ActiveRecord: 0.2ms)
  [1m[36mDiscount Load (0.3ms)[0m  [1mSELECT "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 4]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:33.375462"], ["updated_at", "2015-05-10 13:31:33.375462"]]
  [1m[35m (5.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.386815"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.386815"], ["user_id", 6]]
  [1m[36m (4.2ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"5"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 5]]
Completed 200 OK in 8ms (Views: 3.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:33.409211"], ["updated_at", "2015-05-10 13:31:33.409211"]]
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.421645"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.421645"], ["user_id", 7]]
  [1m[35m (5.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.430794"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:33.430794"]]
  [1m[36m (8.5ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"6", "id"=>"3"}
  [1m[35mEvent Load (0.6ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36mDiscount Load (1.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 6], ["id", 3]]
Completed 200 OK in 21ms (Views: 4.0ms | ActiveRecord: 1.7ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:33.473798"], ["updated_at", "2015-05-10 13:31:33.473798"]]
  [1m[35m (10.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.488443"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.488443"], ["user_id", 8]]
  [1m[36m (9.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:33.507288"], ["updated_at", "2015-05-10 13:31:33.507288"]]
  [1m[36m (15.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.525969"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.525969"], ["user_id", 9]]
  [1m[35m (4.7ms)[0m  commit transaction
Processing by DiscountsController#create as HTML
  Parameters: {"discount"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>nil, "event_id"=>"8", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"7"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 7]]
Unpermitted parameters: id, event_id, deleted_at, created_at, updated_at
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.557364"], ["event_id", 7], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:33.557364"]]
  [1m[35m (8.6ms)[0m  commit transaction
Redirected to http://test.host/events/7/discounts
Completed 302 Found in 34ms (ActiveRecord: 9.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:33.585693"], ["updated_at", "2015-05-10 13:31:33.585693"]]
  [1m[35m (11.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.608169"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.608169"], ["user_id", 10]]
  [1m[36m (12.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (1.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("created_at", "deleted_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.626991"], ["deleted_at", "2015-05-10 13:31:33.622204"], ["event_id", 9], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:33.626991"]]
  [1m[35m (7.8ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 9]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:31:33.654808"], ["updated_at", "2015-05-10 13:31:33.654808"]]
  [1m[35m (7.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.669714"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.669714"], ["user_id", 11]]
  [1m[36m (6.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.683240"], ["event_id", 10], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:33.683240"]]
  [1m[35m (6.1ms)[0m  commit transaction
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"10", "id"=>"6"}
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 10]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 10], ["id", 6]]
Completed 200 OK in 10ms (Views: 2.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:31:33.708164"], ["updated_at", "2015-05-10 13:31:33.708164"]]
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:31:33.715993"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:31:33.715993"], ["user_id", 12]]
  [1m[35m (4.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:31:33.724064"], ["event_id", 11], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:31:33.724064"]]
  [1m[36m (11.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 11]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"11", "id"=>"7"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 11]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 11], ["id", 7]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "discounts" SET "updated_at" = '2015-05-10 13:31:33.752642', "deleted_at" = '2015-05-10 13:31:33.752642' WHERE "discounts"."id" = 7
  [1m[36m (6.4ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/11/discounts
Completed 302 Found in 21ms (ActiveRecord: 7.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 11]]
  [1m[36m (11.2ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.6ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (16.5ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (7.3ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (9.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:07.580024"], ["updated_at", "2015-05-10 13:32:07.580024"]]
  [1m[35m (8.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:07.619830"], ["updated_at", "2015-05-10 13:32:07.619830"]]
  [1m[36m (9.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:07.642858"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:07.642858"], ["user_id", 2]]
  [1m[35m (9.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:07.686726"], ["updated_at", "2015-05-10 13:32:07.686726"]]
  [1m[36m (14.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:07.702881"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:07.702881"], ["user_id", 3]]
  [1m[35m (5.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:32:07.712417"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:07.712417"]]
  [1m[36m (3.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:07.721614"], ["updated_at", "2015-05-10 13:32:07.721614"]]
  [1m[35m (7.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:07.731764"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:07.731764"], ["user_id", 4]]
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:32:07.739409"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:07.739409"]]
  [1m[35m (12.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 3]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"3", "id"=>"2"}
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 3], ["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "discounts" SET "updated_at" = '2015-05-10 13:32:07.836292', "deleted_at" = '2015-05-10 13:32:07.836292' WHERE "discounts"."id" = 2[0m
  [1m[35m (6.7ms)[0m  commit transaction
Redirected to http://test.host/events/3/discounts
Completed 302 Found in 44ms (ActiveRecord: 7.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 3]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:07.858032"], ["updated_at", "2015-05-10 13:32:07.858032"]]
  [1m[35m (9.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:07.875083"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:07.875083"], ["user_id", 5]]
  [1m[36m (12.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:32:07.900175"], ["event_id", 4], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:07.900175"]]
  [1m[35m (5.4ms)[0m  commit transaction
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"4", "id"=>"3"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 4], ["id", 3]]
Completed 200 OK in 58ms (Views: 29.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:07.976807"], ["updated_at", "2015-05-10 13:32:07.976807"]]
  [1m[36m (8.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:07.994199"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:07.994199"], ["user_id", 6]]
  [1m[35m (4.7ms)[0m  commit transaction
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"5"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 5]]
Completed 200 OK in 12ms (Views: 3.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:08.028559"], ["updated_at", "2015-05-10 13:32:08.028559"]]
  [1m[35m (15.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:08.048702"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:08.048702"], ["user_id", 7]]
  [1m[36m (6.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:32:08.058748"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:08.058748"]]
  [1m[35m (9.0ms)[0m  commit transaction
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"name"=>"updated"}, "event_id"=>"6", "id"=>"4"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 6], ["id", 4]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "discounts" SET "name" = ?, "updated_at" = ? WHERE "discounts"."id" = 4  [["name", "updated"], ["updated_at", "2015-05-10 13:32:08.102943"]]
  [1m[36m (5.2ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/6/discounts
Completed 302 Found in 47ms (ActiveRecord: 6.0ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:08.132607"], ["updated_at", "2015-05-10 13:32:08.132607"]]
  [1m[35m (12.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:08.148450"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:08.148450"], ["user_id", 8]]
  [1m[36m (4.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "deleted_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:32:08.164338"], ["deleted_at", "2015-05-10 13:32:08.155816"], ["event_id", 7], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:08.164338"]]
  [1m[35m (23.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 7]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:08.207911"], ["updated_at", "2015-05-10 13:32:08.207911"]]
  [1m[35m (9.1ms)[0m  commit transaction
  [1m[36m (1.7ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:08.223291"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:08.223291"], ["user_id", 9]]
  [1m[36m (9.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:08.240146"], ["updated_at", "2015-05-10 13:32:08.240146"]]
  [1m[36m (9.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:08.256884"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:08.256884"], ["user_id", 10]]
  [1m[35m (10.4ms)[0m  commit transaction
Processing by DiscountsController#create as HTML
  Parameters: {"discount"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>"10", "event_id"=>"9", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"8"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 8]]
Unpermitted parameters: id, event_id, deleted_at, created_at, updated_at
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:32:08.289164"], ["event_id", 8], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:08.289164"]]
  [1m[35m (5.0ms)[0m  commit transaction
Redirected to http://test.host/events/8/discounts
Completed 302 Found in 24ms (ActiveRecord: 5.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:08.301100"], ["updated_at", "2015-05-10 13:32:08.301100"]]
  [1m[35m (5.5ms)[0m  commit transaction
  [1m[36m (1.6ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:08.312692"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:08.312692"], ["user_id", 11]]
  [1m[36m (5.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:32:08.324523"], ["event_id", 10], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:08.324523"]]
  [1m[35m (5.8ms)[0m  commit transaction
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"10", "id"=>"7"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 10]]
  [1m[35mDiscount Load (0.1ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 10], ["id", 7]]
Completed 200 OK in 11ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:08.352322"], ["updated_at", "2015-05-10 13:32:08.352322"]]
  [1m[36m (10.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:08.367054"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:08.367054"], ["user_id", 12]]
  [1m[35m (5.3ms)[0m  commit transaction
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"11"}
  [1m[36mEvent Load (0.9ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 11]]
Completed 200 OK in 20ms (Views: 12.3ms | ActiveRecord: 0.9ms)
  [1m[35mDiscount Load (0.3ms)[0m  SELECT "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 11]]
  [1m[36m (9.2ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (6.5ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (7.4ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (7.8ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (7.6ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (8.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:32.419802"], ["updated_at", "2015-05-10 13:32:32.419802"]]
  [1m[35m (5.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:32.442084"], ["updated_at", "2015-05-10 13:32:32.442084"]]
  [1m[36m (7.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:32.460187"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:32.460187"], ["user_id", 2]]
  [1m[35m (5.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:32.483295"], ["updated_at", "2015-05-10 13:32:32.483295"]]
  [1m[36m (6.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:32.492309"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:32.492309"], ["user_id", 3]]
  [1m[35m (13.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:32:32.511884"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:32.511884"]]
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:32.536532"], ["updated_at", "2015-05-10 13:32:32.536532"]]
  [1m[35m (6.7ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:32.548864"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:32.548864"], ["user_id", 4]]
  [1m[36m (7.2ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"3"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 3]]
  Rendered discounts/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 53ms (Views: 31.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:32.628222"], ["updated_at", "2015-05-10 13:32:32.628222"]]
  [1m[36m (8.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:32.661103"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:32.661103"], ["user_id", 5]]
  [1m[35m (8.8ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "deleted_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:32:32.694773"], ["deleted_at", "2015-05-10 13:32:32.672738"], ["event_id", 4], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:32.694773"]]
  [1m[36m (6.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 4]]
Processing by DiscountsController#undestroy as HTML
  Parameters: {"event_id"=>"4", "id"=>"2"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mDiscount Load (0.3ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 4], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "discounts" SET "deleted_at" = ?, "updated_at" = ? WHERE "discounts"."id" = 2  [["deleted_at", nil], ["updated_at", "2015-05-10 13:32:32.737416"]]
  [1m[36m (8.4ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/4/discounts
Completed 302 Found in 24ms (ActiveRecord: 9.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 4]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:32.759584"], ["updated_at", "2015-05-10 13:32:32.759584"]]
  [1m[36m (7.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:32.771535"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:32.771535"], ["user_id", 6]]
  [1m[35m (13.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:32.791304"], ["updated_at", "2015-05-10 13:32:32.791304"]]
  [1m[35m (8.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:32.803543"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:32.803543"], ["user_id", 7]]
  [1m[36m (15.5ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#create as HTML
  Parameters: {"discount"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>"10", "event_id"=>"6", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"5"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 5]]
Unpermitted parameters: id, event_id, deleted_at, created_at, updated_at
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:32:32.840892"], ["event_id", 5], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:32.840892"]]
  [1m[36m (19.5ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/5/discounts
Completed 302 Found in 35ms (ActiveRecord: 19.8ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:32.870587"], ["updated_at", "2015-05-10 13:32:32.870587"]]
  [1m[36m (4.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:32.880642"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:32.880642"], ["user_id", 8]]
  [1m[35m (6.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:32:32.899600"], ["event_id", 7], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:32.899600"]]
  [1m[36m (18.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 7]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"7", "id"=>"4"}
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 7]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 7], ["id", 4]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "discounts" SET "updated_at" = '2015-05-10 13:32:32.934755', "deleted_at" = '2015-05-10 13:32:32.934755' WHERE "discounts"."id" = 4
  [1m[36m (5.9ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/7/discounts
Completed 302 Found in 18ms (ActiveRecord: 7.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 7]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:32.953820"], ["updated_at", "2015-05-10 13:32:32.953820"]]
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:32.967005"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:32.967005"], ["user_id", 9]]
  [1m[35m (9.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:32:32.979798"], ["event_id", 8], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:32.979798"]]
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"name"=>"updated"}, "event_id"=>"8", "id"=>"5"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 8]]
  [1m[36mDiscount Load (0.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 8], ["id", 5]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "discounts" SET "name" = ?, "updated_at" = ? WHERE "discounts"."id" = 5[0m  [["name", "updated"], ["updated_at", "2015-05-10 13:32:33.007917"]]
  [1m[35m (5.2ms)[0m  commit transaction
Redirected to http://test.host/events/8/discounts
Completed 302 Found in 24ms (ActiveRecord: 5.9ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:33.021564"], ["updated_at", "2015-05-10 13:32:33.021564"]]
  [1m[36m (7.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:33.033182"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:33.033182"], ["user_id", 10]]
  [1m[35m (6.3ms)[0m  commit transaction
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"9"}
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 9]]
Completed 200 OK in 11ms (Views: 2.7ms | ActiveRecord: 0.3ms)
  [1m[35mDiscount Load (0.2ms)[0m  SELECT "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?  [["event_id", 9]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:32:33.071149"], ["updated_at", "2015-05-10 13:32:33.071149"]]
  [1m[36m (9.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:32:33.087584"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:33.087584"], ["user_id", 11]]
  [1m[35m (7.2ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:32:33.104540"], ["event_id", 10], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:33.104540"]]
  [1m[36m (10.4ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"10", "id"=>"6"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 10]]
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 10], ["id", 6]]
Completed 200 OK in 22ms (Views: 10.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:32:33.149201"], ["updated_at", "2015-05-10 13:32:33.149201"]]
  [1m[35m (5.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:32:33.157656"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:32:33.157656"], ["user_id", 12]]
  [1m[36m (15.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (5.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:32:33.191125"], ["event_id", 11], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:32:33.191125"]]
  [1m[35m (7.4ms)[0m  commit transaction
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"11", "id"=>"7"}
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 11]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 11], ["id", 7]]
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 0.3ms)
  [1m[36m (6.2ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (5.5ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (8.9ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (6.4ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (6.9ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (5.3ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:33:27.019549"], ["updated_at", "2015-05-10 13:33:27.019549"]]
  [1m[35m (4.9ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:33:27.046927"], ["updated_at", "2015-05-10 13:33:27.046927"]]
  [1m[36m (21.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:33:27.081356"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:33:27.081356"], ["user_id", 2]]
  [1m[35m (4.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:33:27.136629"], ["updated_at", "2015-05-10 13:33:27.136629"]]
  [1m[36m (5.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:33:27.144338"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:33:27.144338"], ["user_id", 3]]
  [1m[35m (4.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:33:27.155655"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:33:27.155655"]]
  [1m[36m (5.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:33:27.167745"], ["updated_at", "2015-05-10 13:33:27.167745"]]
  [1m[35m (5.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:33:27.175882"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:33:27.175882"], ["user_id", 4]]
  [1m[36m (20.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:33:27.210400"], ["updated_at", "2015-05-10 13:33:27.210400"]]
  [1m[36m (7.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:33:27.223134"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:33:27.223134"], ["user_id", 5]]
  [1m[35m (7.4ms)[0m  commit transaction
Processing by DiscountsController#create as HTML
  Parameters: {"discount"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>"10", "event_id"=>"4", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"3"}
  [1m[36mEvent Load (0.3ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 3]]
Unpermitted parameters: id, event_id, deleted_at, created_at, updated_at
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:33:40.670674"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:33:40.670674"]]
  [1m[35m (26.5ms)[0m  commit transaction
Redirected to http://test.host/events/3/discounts
Completed 302 Found in 41101ms (ActiveRecord: 27.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL[0m
  [1m[36m (18.9ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (9.1ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (5.4ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (6.7ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (6.5ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:34:13.871049"], ["updated_at", "2015-05-10 13:34:13.871049"]]
  [1m[35m (6.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:34:13.896541"], ["updated_at", "2015-05-10 13:34:13.896541"]]
  [1m[36m (8.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:34:13.925932"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:13.925932"], ["user_id", 2]]
  [1m[35m (5.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:34:13.959341"], ["updated_at", "2015-05-10 13:34:13.959341"]]
  [1m[36m (8.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:34:13.970960"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:13.970960"], ["user_id", 3]]
  [1m[35m (7.3ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:34:13.984863"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:34:13.984863"]]
  [1m[36m (10.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:34:14.007094"], ["updated_at", "2015-05-10 13:34:14.007094"]]
  [1m[35m (14.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:34:14.024977"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.024977"], ["user_id", 4]]
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"3"}
  [1m[35mEvent Load (0.4ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 3]]
  Rendered discounts/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 63ms (Views: 16.0ms | ActiveRecord: 0.4ms)
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 3]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:34:14.109248"], ["updated_at", "2015-05-10 13:34:14.109248"]]
  [1m[35m (6.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:34:14.121847"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.121847"], ["user_id", 5]]
  [1m[36m (7.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:34:14.136131"], ["event_id", 4], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:34:14.136131"]]
  [1m[35m (7.2ms)[0m  commit transaction
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"4", "id"=>"2"}
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mDiscount Load (1.6ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 4], ["id", 2]]
Completed 200 OK in 18ms (Views: 5.4ms | ActiveRecord: 1.8ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:34:14.185917"], ["updated_at", "2015-05-10 13:34:14.185917"]]
  [1m[36m (6.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:34:14.199479"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.199479"], ["user_id", 6]]
  [1m[35m (5.9ms)[0m  commit transaction
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"5"}
  [1m[36mEvent Load (0.4ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 5]]
Completed 200 OK in 12ms (Views: 4.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:34:14.227172"], ["updated_at", "2015-05-10 13:34:14.227172"]]
  [1m[35m (6.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:34:14.236982"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.236982"], ["user_id", 7]]
  [1m[36m (23.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:34:14.266452"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:34:14.266452"]]
  [1m[35m (9.6ms)[0m  commit transaction
  [1m[36m (5.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 6]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"6", "id"=>"3"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36mDiscount Load (0.2ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 6], ["id", 3]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "discounts" SET "updated_at" = '2015-05-10 13:34:14.324954', "deleted_at" = '2015-05-10 13:34:14.324954' WHERE "discounts"."id" = 3[0m
  [1m[35m (17.0ms)[0m  commit transaction
Redirected to http://test.host/events/6/discounts
Completed 302 Found in 34ms (ActiveRecord: 17.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 6]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:34:14.356526"], ["updated_at", "2015-05-10 13:34:14.356526"]]
  [1m[35m (22.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:34:14.390026"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.390026"], ["user_id", 8]]
  [1m[36m (7.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "deleted_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:34:14.403003"], ["deleted_at", "2015-05-10 13:34:14.400724"], ["event_id", 7], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:34:14.403003"]]
  [1m[35m (8.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 7]]
Processing by DiscountsController#undestroy as HTML
  Parameters: {"event_id"=>"7", "id"=>"4"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 7]]
  [1m[36mDiscount Load (0.6ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 7], ["id", 4]]
  [1m[35m (0.9ms)[0m  begin transaction
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "discounts" SET "deleted_at" = ?, "updated_at" = ? WHERE "discounts"."id" = 4[0m  [["deleted_at", nil], ["updated_at", "2015-05-10 13:34:14.458112"]]
  [1m[35m (11.7ms)[0m  commit transaction
Redirected to http://test.host/events/7/discounts
Completed 302 Found in 50ms (ActiveRecord: 13.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 7]]
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:34:14.482843"], ["updated_at", "2015-05-10 13:34:14.482843"]]
  [1m[35m (6.9ms)[0m  commit transaction
  [1m[36m (3.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:34:14.502717"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.502717"], ["user_id", 9]]
  [1m[36m (6.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:34:14.515896"], ["event_id", 8], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:34:14.515896"]]
  [1m[35m (12.6ms)[0m  commit transaction
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"name"=>"updated"}, "event_id"=>"8", "id"=>"5"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 8]]
  [1m[35mDiscount Load (0.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 8], ["id", 5]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "discounts" SET "name" = ?, "updated_at" = ? WHERE "discounts"."id" = 5  [["name", "updated"], ["updated_at", "2015-05-10 13:34:14.547172"]]
  [1m[36m (9.5ms)[0m  [1mcommit transaction[0m
Redirected to http://test.host/events/8/discounts
Completed 302 Found in 21ms (ActiveRecord: 10.1ms)
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:34:14.567054"], ["updated_at", "2015-05-10 13:34:14.567054"]]
  [1m[35m (11.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:34:14.582919"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.582919"], ["user_id", 10]]
  [1m[36m (12.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:34:14.604691"], ["updated_at", "2015-05-10 13:34:14.604691"]]
  [1m[36m (6.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:34:14.615565"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.615565"], ["user_id", 11]]
  [1m[35m (11.5ms)[0m  commit transaction
Processing by DiscountsController#create as HTML
  Parameters: {"discount"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>"10", "event_id"=>"10", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"9"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 9]]
Unpermitted parameters: id, event_id, deleted_at, created_at, updated_at
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:34:14.645796"], ["event_id", 9], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:34:14.645796"]]
  [1m[35m (10.9ms)[0m  commit transaction
Redirected to http://test.host/events/9/discounts
Completed 302 Found in 20ms (ActiveRecord: 11.6ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:34:14.670066"], ["updated_at", "2015-05-10 13:34:14.670066"]]
  [1m[35m (5.9ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:34:14.686723"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:34:14.686723"], ["user_id", 12]]
  [1m[36m (4.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:34:14.695338"], ["event_id", 11], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:34:14.695338"]]
  [1m[35m (11.2ms)[0m  commit transaction
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"11", "id"=>"7"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 11]]
  [1m[35mDiscount Load (1.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 11], ["id", 7]]
Completed 200 OK in 9ms (Views: 2.2ms | ActiveRecord: 1.3ms)
  [1m[36m (5.6ms)[0m  [1mDROP TABLE "discounts"[0m
  [1m[35m (4.7ms)[0m  CREATE TABLE "discounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "amount" integer, "event_id" integer, "deleted_at" datetime, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (7.0ms)[0m  [1mDROP TABLE "events"[0m
  [1m[35m (8.3ms)[0m  CREATE TABLE "events" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "user_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (5.3ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (10.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:35:29.448038"], ["updated_at", "2015-05-10 13:35:29.448038"]]
  [1m[35m (7.9ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:35:29.485038"], ["updated_at", "2015-05-10 13:35:29.485038"]]
  [1m[36m (8.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:35:29.510891"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:29.510891"], ["user_id", 2]]
  [1m[35m (5.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:35:29.542152"], ["updated_at", "2015-05-10 13:35:29.542152"]]
  [1m[36m (5.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:35:29.551329"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:29.551329"], ["user_id", 3]]
  [1m[35m (5.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:35:29.564993"], ["event_id", 2], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:35:29.564993"]]
  [1m[36m (11.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:35:29.588169"], ["updated_at", "2015-05-10 13:35:29.588169"]]
  [1m[35m (5.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:35:29.597081"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:29.597081"], ["user_id", 4]]
  [1m[36m (5.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:35:29.610101"], ["event_id", 3], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:35:29.610101"]]
  [1m[35m (5.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 3]]
Processing by DiscountsController#destroy as HTML
  Parameters: {"event_id"=>"3", "id"=>"2"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mDiscount Load (0.3ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 3], ["id", 2]]
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "discounts" SET "updated_at" = '2015-05-10 13:35:29.673938', "deleted_at" = '2015-05-10 13:35:29.673938' WHERE "discounts"."id" = 2[0m
  [1m[35m (5.7ms)[0m  commit transaction
Redirected to http://test.host/events/3/discounts
Completed 302 Found in 27ms (ActiveRecord: 7.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 3]]
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:35:29.689458"], ["updated_at", "2015-05-10 13:35:29.689458"]]
  [1m[35m (10.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:35:29.706662"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:29.706662"], ["user_id", 5]]
  [1m[36m (5.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:35:29.715388"], ["event_id", 4], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:35:29.715388"]]
  [1m[35m (4.9ms)[0m  commit transaction
Processing by DiscountsController#show as HTML
  Parameters: {"event_id"=>"4", "id"=>"3"}
  [1m[36mEvent Load (0.2ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mDiscount Load (2.2ms)[0m  SELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1  [["event_id", 4], ["id", 3]]
Completed 200 OK in 21ms (Views: 9.1ms | ActiveRecord: 2.3ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:35:29.755067"], ["updated_at", "2015-05-10 13:35:29.755067"]]
  [1m[36m (8.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:35:29.766886"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:29.766886"], ["user_id", 6]]
  [1m[35m (5.0ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:35:29.779698"], ["event_id", 5], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:35:29.779698"]]
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#edit as HTML
  Parameters: {"event_id"=>"5", "id"=>"4"}
  [1m[35mEvent Load (0.2ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 5]]
  [1m[36mDiscount Load (0.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 5], ["id", 4]]
Completed 200 OK in 15ms (Views: 3.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:35:29.805823"], ["updated_at", "2015-05-10 13:35:29.805823"]]
  [1m[35m (12.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:35:29.822271"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:29.822271"], ["user_id", 7]]
  [1m[36m (5.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "deleted_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:35:29.844753"], ["deleted_at", "2015-05-10 13:35:29.834331"], ["event_id", 6], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:35:29.844753"]]
  [1m[35m (21.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 6]]
Processing by DiscountsController#undestroy as HTML
  Parameters: {"event_id"=>"6", "id"=>"5"}
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36mDiscount Load (6.2ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 6], ["id", 5]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "discounts" SET "deleted_at" = ?, "updated_at" = ? WHERE "discounts"."id" = 5[0m  [["deleted_at", nil], ["updated_at", "2015-05-10 13:35:29.883087"]]
  [1m[35m (12.4ms)[0m  commit transaction
Redirected to http://test.host/events/6/discounts
Completed 302 Found in 33ms (ActiveRecord: 19.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 6]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:35:29.920430"], ["updated_at", "2015-05-10 13:35:29.920430"]]
  [1m[35m (8.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:35:29.939043"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:29.939043"], ["user_id", 8]]
  [1m[36m (8.7ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#new as HTML
  Parameters: {"event_id"=>"7"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 7]]
Completed 200 OK in 7ms (Views: 2.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:35:29.975185"], ["updated_at", "2015-05-10 13:35:29.975185"]]
  [1m[36m (6.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:35:29.987503"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:29.987503"], ["user_id", 9]]
  [1m[35m (7.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:35:29.999848"], ["event_id", 8], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:35:29.999848"]]
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#update as HTML
  Parameters: {"discount"=>{"name"=>"updated"}, "event_id"=>"8", "id"=>"6"}
  [1m[35mEvent Load (0.3ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 8]]
  [1m[36mDiscount Load (0.1ms)[0m  [1mSELECT  "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ? AND "discounts"."id" = ? LIMIT 1[0m  [["event_id", 8], ["id", 6]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "discounts" SET "name" = ?, "updated_at" = ? WHERE "discounts"."id" = 6[0m  [["name", "updated"], ["updated_at", "2015-05-10 13:35:30.036607"]]
  [1m[35m (6.4ms)[0m  commit transaction
Redirected to http://test.host/events/8/discounts
Completed 302 Found in 29ms (ActiveRecord: 7.7ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:35:30.049196"], ["updated_at", "2015-05-10 13:35:30.049196"]]
  [1m[36m (5.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:35:30.059147"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:30.059147"], ["user_id", 10]]
  [1m[35m (5.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["amount", 10], ["created_at", "2015-05-10 13:35:30.072777"], ["event_id", 9], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:35:30.072777"]]
  [1m[36m (5.7ms)[0m  [1mcommit transaction[0m
Processing by DiscountsController#index as HTML
  Parameters: {"event_id"=>"9"}
  [1m[35mEvent Load (0.1ms)[0m  SELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1  [["id", 9]]
Completed 200 OK in 5ms (Views: 2.0ms | ActiveRecord: 0.1ms)
  [1m[36mDiscount Load (0.5ms)[0m  [1mSELECT "discounts".* FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL AND "discounts"."event_id" = ?[0m  [["event_id", 9]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-05-10 13:35:30.100438"], ["updated_at", "2015-05-10 13:35:30.100438"]]
  [1m[35m (6.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-05-10 13:35:30.109561"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:30.109561"], ["user_id", 11]]
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-05-10 13:35:30.135825"], ["updated_at", "2015-05-10 13:35:30.135825"]]
  [1m[36m (6.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "events" ("created_at", "name", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-05-10 13:35:30.146768"], ["name", "Test Event"], ["updated_at", "2015-05-10 13:35:30.146768"], ["user_id", 12]]
  [1m[35m (12.5ms)[0m  commit transaction
Processing by DiscountsController#create as HTML
  Parameters: {"discount"=>{"id"=>nil, "name"=>"Some Discount", "amount"=>"10", "event_id"=>"11", "deleted_at"=>nil, "created_at"=>nil, "updated_at"=>nil}, "event_id"=>"10"}
  [1m[36mEvent Load (0.1ms)[0m  [1mSELECT  "events".* FROM "events"  WHERE "events"."id" = ? LIMIT 1[0m  [["id", 10]]
Unpermitted parameters: id, event_id, deleted_at, created_at, updated_at
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "discounts" ("amount", "created_at", "event_id", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["amount", 10], ["created_at", "2015-05-10 13:35:30.172995"], ["event_id", 10], ["name", "Some Discount"], ["updated_at", "2015-05-10 13:35:30.172995"]]
  [1m[35m (9.4ms)[0m  commit transaction
Redirected to http://test.host/events/10/discounts
Completed 302 Found in 23ms (ActiveRecord: 9.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "discounts"  WHERE "discounts"."deleted_at" IS NULL[0m
